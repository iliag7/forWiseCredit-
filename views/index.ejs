<!DOCTYPE html>  
<html>  
<head>
  <meta charset="utf-8">
  <title>User page</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
	<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</head>
<body>
  <table id="example" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Email</th>
                <th>Password</th>
				<th>Token</th>
            </tr>
        </thead>
        <tbody>
<% for(var index in JSON.parse(data).data) {%>
   <tr>
     <td><%= JSON.parse(data).data[index].id %></td>
	 <td><%= JSON.parse(data).data[index].name %></td>
	 <td><%= JSON.parse(data).data[index].email %></td>
	 <td><%= JSON.parse(data).data[index].password %></td>
	 <td><%= JSON.parse(data).data[index].token %></td>
	 <td><a href="/delete/<%= JSON.parse(data).data[index].id %>" class="btn btn-primary delete" role="button">Delete</a></td>
	 <td><a href="/update/<%= JSON.parse(data).data[index].id %>" class="btn btn-primary update myBtn" role="button" data-toggle="modal" data-target="#myModal" data-id="<%= JSON.parse(data).data[index].id %>">Update</a></td>
   </tr>
<% } %>
      </tbody> 
	</table>
	<a href="/create" class="btn btn-primary" role="button">Create</a>	
<div class="modal" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h4 class="modal-title">Modal Heading</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
		<form action="/update/14" method="POST" enctype="multipart/form-data">
			  <div class="form-group">
				<label for="name">Name</label>
				<input type="text" class="form-control" name="name" aria-describedby="basic-addon3">
			  </div>
			  <div class="form-group">
				<label for="name">Email</label>
				<input type="text" class="form-control" name="email" aria-describedby="basic-addon3">
			  </div>
			  <div class="form-group">
				<label for="password">Password</label>
				<input type="text" class="form-control" name="password" aria-describedby="basic-addon3">
			  </div>
			    <div class="form-group">
				<label for="token">Token</label>
				<input type="text" class="form-control" name="token" aria-describedby="basic-addon3">
			  </div>
			  <button  id="save-update" type="submit" class="btn btn-primary">Submit</button>
		</form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>


<script>
$(document).ready(function() {
    $('#example').DataTable({
		"processing" : true,
        "serverSide" : true,
		"ajax": {
			"url": "/",
			"type": "GET",
			"dataSrc": "data"
		},		
	});
	$('#create').click(function(){
		$('#example').dataTable().fnReloadAjax();
	});
	$('.delete').click(function(){
		$('#example').dataTable().fnReloadAjax();
	});
});

</script>	

</body>
</html>  